<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Organization Hierarchy</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #2c3e50, #1a2530);
            color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .description {
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .filter-btn {
            padding: 10px 20px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .filter-btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }
        
        .filter-btn.active {
            background-color: #2c3e50;
        }
        
        .hierarchy-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-bottom: 30px;
            overflow-x: auto;
        }
        
        .org-chart {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .level {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 25px;
            margin-bottom: 25px;
            width: 100%;
        }
        
        .node {
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            width: 220px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            position: relative;
        }
        
        .node:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .node::before {
            content: '';
            position: absolute;
            top: -16px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 16px;
            background-color: #ccc;
        }
        
        .node h3 {
            font-size: 1.2rem;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .node p {
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        .connector {
            height: 25px;
            width: 2px;
            background-color: #ccc;
            margin: 0 auto;
        }
        
        .footer {
            text-align: center;
            margin-top: 30px;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .level {
                flex-direction: column;
                align-items: center;
            }
            
            .node {
                width: 90%;
                max-width: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Judicial Hierarchy</h1>
            <p class="description">This chart displays the organizational structure of the magistrate court system, showing reporting lines and positions within the judiciary.</p>
        </header>
        
        <div class="controls">
            <button class="filter-btn active" data-filter="all">All Positions</button>
            <button class="filter-btn" data-filter="Chief Magistrate">Chief Magistrate</button>
            <button class="filter-btn" data-filter="Deputy Chief Magistrate">Deputy Chief Magistrate</button>
            <button class="filter-btn" data-filter="Regional Magistrate">Regional Magistrate</button>
        </div>
        
        <div class="hierarchy-container">
            <div class="org-chart" id="orgChart">
                <!-- Organization chart will be generated here -->
            </div>
        </div>
        
        <div class="footer">
            <p>Â© 2023 Judicial System Organization Chart | Data updated monthly</p>
        </div>
    </div>

    <script>
        // Sample CSV data (in a real scenario, this would be loaded from a separate file)
        const csvData = `Name,Title,ReportsTo
Sarah Johnson,Chief Magistrate,
Michael Brown,Deputy Chief Magistrate,Chief Magistrate
Emily Davis,Regional Magistrate,Deputy Chief Magistrate
Robert Wilson,Regional Magistrate,Deputy Chief Magistrate
Jennifer Lee,Provincial Magistrate,Regional Magistrate
David Miller,Provincial Magistrate,Regional Magistrate
Jessica Garcia,Senior Magistrate,Provincial Magistrate
Christopher Martinez,Senior Magistrate,Provincial Magistrate
Amanda Rodriguez,Resident Magistrate,Senior Magistrate
Daniel Smith,Resident Magistrate,Senior Magistrate
Matthew Taylor,Magistrate,Resident Magistrate
Elizabeth Thomas,Magistrate,Resident Magistrate`;

        // Parse CSV data
        function parseCSV(csv) {
            const lines = csv.split('\n');
            const result = [];
            const headers = lines[0].split(',');
            
            for (let i = 1; i < lines.length; i++) {
                const obj = {};
                const currentline = lines[i].split(',');
                
                for (let j = 0; j < headers.length; j++) {
                    obj[headers[j]] = currentline[j];
                }
                
                result.push(obj);
            }
            
            return result;
        }

        // Build hierarchy tree from flat data
        function buildHierarchy(data) {
            const map = {};
            const roots = [];
            
            // First create a map of all nodes
            data.forEach(item => {
                map[item.Name] = { ...item, children: [] };
            });
            
            // Then build the hierarchy
            data.forEach(item => {
                const node = map[item.Name];
                
                if (item.ReportsTo && map[item.ReportsTo]) {
                    map[item.ReportsTo].children.push(node);
                } else {
                    roots.push(node);
                }
            });
            
            return roots;
        }

        // Render organization chart
        function renderOrgChart(data, container) {
            container.innerHTML = '';
            
            function createLevel(nodes, level = 0) {
                const levelDiv = document.createElement('div');
                levelDiv.className = 'level';
                
                nodes.forEach(node => {
                    const nodeDiv = document.createElement('div');
                    nodeDiv.className = 'node';
                    nodeDiv.dataset.title = node.Title;
                    
                    nodeDiv.innerHTML = `
                        <h3>${node.Title}</h3>
                        <p>${node.Name}</p>
                    `;
                    
                    levelDiv.appendChild(nodeDiv);
                    
                    if (node.children && node.children.length > 0) {
                        const connector = document.createElement('div');
                        connector.className = 'connector';
                        container.appendChild(connector);
                        
                        createLevel(node.children, level + 1);
                    }
                });
                
                container.appendChild(levelDiv);
            }
            
            createLevel(data);
        }

        // Filter organization chart by title
        function filterByTitle(title) {
            const allData = parseCSV(csvData);
            let filteredData;
            
            if (title === 'all') {
                filteredData = buildHierarchy(allData);
            } else {
                // Find the node with the selected title and build hierarchy from there
                const nodeWithTitle = allData.find(item => item.Title === title);
                if (nodeWithTitle) {
                    const hierarchy = buildHierarchy(allData);
                    // Find the node in the hierarchy
                    function findNode(nodes, name) {
                        for (const node of nodes) {
                            if (node.Name === name) return node;
                            if (node.children.length > 0) {
                                const found = findNode(node.children, name);
                                if (found) return found;
                            }
                        }
                        return null;
                    }
                    filteredData = [findNode(hierarchy, nodeWithTitle.Name)];
                } else {
                    filteredData = buildHierarchy(allData);
                }
            }
            
            renderOrgChart(filteredData, document.getElementById('orgChart'));
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            const parsedData = parseCSV(csvData);
            const hierarchy = buildHierarchy(parsedData);
            renderOrgChart(hierarchy, document.getElementById('orgChart'));
            
            // Add event listeners to filter buttons
            document.querySelectorAll('.filter-btn').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    this.classList.add('active');
                    filterByTitle(this.dataset.filter);
                });
            });
        });
    </script>
</body>
</html>
